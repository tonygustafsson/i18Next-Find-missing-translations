{"version":3,"file":"parser.js","names":["path","EventEmitter","HandlebarsLexer","HTMLLexer","JavascriptLexer","JsxLexer","VueLexer","lexers","hbs","handlebars","htm","html","mjs","js","ts","jsx","tsx","vue","lexersMap","Parser","options","content","filename","keys","extension","extname","substr","lexerConfig","lexerName","lexerOptions","lexer","Lexer","emit","Error","on","warning","concat","extract"],"sources":["../src/parser.js"],"sourcesContent":["import path from 'path'\nimport EventEmitter from 'events'\nimport HandlebarsLexer from './lexers/handlebars-lexer.js'\nimport HTMLLexer from './lexers/html-lexer.js'\nimport JavascriptLexer from './lexers/javascript-lexer.js'\nimport JsxLexer from './lexers/jsx-lexer.js'\nimport VueLexer from './lexers/vue-lexer.js'\n\nconst lexers = {\n  hbs: ['HandlebarsLexer'],\n  handlebars: ['HandlebarsLexer'],\n\n  htm: ['HTMLLexer'],\n  html: ['HTMLLexer'],\n\n  mjs: ['JavascriptLexer'],\n  js: ['JavascriptLexer'],\n  ts: ['JavascriptLexer'],\n  jsx: ['JsxLexer'],\n  tsx: ['JsxLexer'],\n\n  vue: ['VueLexer'],\n\n  default: ['JavascriptLexer'],\n}\n\nconst lexersMap = {\n  HandlebarsLexer,\n  HTMLLexer,\n  JavascriptLexer,\n  JsxLexer,\n  VueLexer,\n}\n\nexport default class Parser extends EventEmitter {\n  constructor(options = {}) {\n    super(options)\n    this.options = options\n    this.lexers = { ...lexers, ...options.lexers }\n  }\n\n  parse(content, filename) {\n    let keys = []\n    const extension = path.extname(filename).substr(1)\n    const lexers = this.lexers[extension] || this.lexers.default\n\n    for (const lexerConfig of lexers) {\n      let lexerName\n      let lexerOptions\n\n      if (\n        typeof lexerConfig === 'string' ||\n        typeof lexerConfig === 'function'\n      ) {\n        lexerName = lexerConfig\n        lexerOptions = {}\n      } else {\n        lexerName = lexerConfig.lexer\n        lexerOptions = lexerConfig\n      }\n\n      let Lexer\n      if (typeof lexerName === 'function') {\n        Lexer = lexerName\n      } else {\n        if (!lexersMap[lexerName]) {\n          this.emit('error', new Error(`Lexer '${lexerName}' does not exist`))\n        }\n\n        Lexer = lexersMap[lexerName]\n      }\n\n      const lexer = new Lexer(lexerOptions)\n      lexer.on('warning', (warning) => this.emit('warning', warning))\n      keys = keys.concat(lexer.extract(content, filename))\n    }\n\n    return keys\n  }\n}\n"],"mappings":"s8GAAA,OAAOA,IAAI,MAAM,MAAM;AACvB,OAAOC,YAAY,MAAM,QAAQ;AACjC,OAAOC,eAAe,MAAM,8BAA8B;AAC1D,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,eAAe,MAAM,8BAA8B;AAC1D,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,QAAQ,MAAM,uBAAuB;;AAE5C,IAAMC,MAAM,GAAG;EACbC,GAAG,EAAE,CAAC,iBAAiB,CAAC;EACxBC,UAAU,EAAE,CAAC,iBAAiB,CAAC;;EAE/BC,GAAG,EAAE,CAAC,WAAW,CAAC;EAClBC,IAAI,EAAE,CAAC,WAAW,CAAC;;EAEnBC,GAAG,EAAE,CAAC,iBAAiB,CAAC;EACxBC,EAAE,EAAE,CAAC,iBAAiB,CAAC;EACvBC,EAAE,EAAE,CAAC,iBAAiB,CAAC;EACvBC,GAAG,EAAE,CAAC,UAAU,CAAC;EACjBC,GAAG,EAAE,CAAC,UAAU,CAAC;;EAEjBC,GAAG,EAAE,CAAC,UAAU,CAAC;;EAEjB,WAAS,CAAC,iBAAiB;AAC7B,CAAC;;AAED,IAAMC,SAAS,GAAG;EAChBhB,eAAe,EAAfA,eAAe;EACfC,SAAS,EAATA,SAAS;EACTC,eAAe,EAAfA,eAAe;EACfC,QAAQ,EAARA,QAAQ;EACRC,QAAQ,EAARA;AACF,CAAC;;AAEoBa,MAAM;EACzB,kBAA0B,eAAdC,OAAO,uEAAG,CAAC,CAAC;IACtB,0BAAMA,OAAO;IACb,MAAKA,OAAO,GAAGA,OAAO;IACtB,MAAKb,MAAM,mCAAQA,MAAM,GAAKa,OAAO,CAACb,MAAM,CAAE;EAChD,CAAC;;IAED,eAAMc,OAAO,EAAEC,QAAQ,EAAE;MACvB,IAAIC,IAAI,GAAG,EAAE;MACb,IAAMC,SAAS,GAAGxB,IAAI,CAACyB,OAAO,CAACH,QAAQ,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC;MAClD,IAAMnB,MAAM,GAAG,IAAI,CAACA,MAAM,CAACiB,SAAS,CAAC,IAAI,IAAI,CAACjB,MAAM,WAAQ;;QAElCA,MAAM,aAAhC,oDAAkC,KAAvBoB,WAAW;UACpB,IAAIC,SAAS;UACb,IAAIC,YAAY;;UAEhB;UACE,OAAOF,WAAW,KAAK,QAAQ;UAC/B,OAAOA,WAAW,KAAK,UAAU;UACjC;YACAC,SAAS,GAAGD,WAAW;YACvBE,YAAY,GAAG,CAAC,CAAC;UACnB,CAAC,MAAM;YACLD,SAAS,GAAGD,WAAW,CAACG,KAAK;YAC7BD,YAAY,GAAGF,WAAW;UAC5B;;UAEA,IAAII,KAAK;UACT,IAAI,OAAOH,SAAS,KAAK,UAAU,EAAE;YACnCG,KAAK,GAAGH,SAAS;UACnB,CAAC,MAAM;YACL,IAAI,CAACV,SAAS,CAACU,SAAS,CAAC,EAAE;cACzB,IAAI,CAACI,IAAI,CAAC,OAAO,EAAE,IAAIC,KAAK,kBAAWL,SAAS,sBAAmB,CAAC;YACtE;;YAEAG,KAAK,GAAGb,SAAS,CAACU,SAAS,CAAC;UAC9B;;UAEA,IAAME,KAAK,GAAG,IAAIC,KAAK,CAACF,YAAY,CAAC;UACrCC,KAAK,CAACI,EAAE,CAAC,SAAS,EAAE,UAACC,OAAO,UAAK,MAAI,CAACH,IAAI,CAAC,SAAS,EAAEG,OAAO,CAAC,GAAC;UAC/DZ,IAAI,GAAGA,IAAI,CAACa,MAAM,CAACN,KAAK,CAACO,OAAO,CAAChB,OAAO,EAAEC,QAAQ,CAAC,CAAC;QACtD,CAAC;;MAED,OAAOC,IAAI;IACb,CAAC,qBA5CiCtB,YAAY,WAA3BkB,MAAM"}